<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>12 Regras de Ouro ‚Äì Para um Ano Mais Seguro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}
.container{
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:10px;
}
h1,h2,h3{text-align:center}
.hidden{display:none}
input,select{
  width:100%;
  padding:10px;
  margin-bottom:12px;
  border-radius:6px;
  border:1px solid #ccc;
}
button{
  background:#2e7d32;
  color:#fff;
  border:none;
  padding:12px 18px;
  border-radius:6px;
  cursor:pointer;
  font-size:16px;
}
button:hover{background:#256428}
.question{
  background:#fafafa;
  padding:12px;
  border-radius:6px;
  margin-bottom:12px;
  border-left:6px solid #ccc;
}
.question.correct{
  border-left-color:#2e7d32;
  background:#e8f5e9;
}
.question.wrong{
  border-left-color:#c62828;
  background:#fdecea;
}
.ranking{
  background:#f1f8e9;
  padding:15px;
  border-radius:8px;
  margin-top:30px;
}
.msg{
  margin-top:15px;
  font-weight:bold;
  color:#2e7d32;
}
.escudo{
  display:block;
  margin:0 auto 15px;
  max-width:140px;
}
.selo{
  width:140px;
  padding:10px;
  border-radius:8px;
  background:#e8f5e9;
  border:2px solid #2e7d32;
  text-align:center;
  font-weight:bold;
  font-size:13px;
}
</style>
</head>

<body>

<div class="container">

<img src="escudo.png" class="escudo" alt="Escudo 12 Regras de Ouro">

<h1>12 Regras de Ouro</h1>
<h2>Para um Ano Mais Seguro</h2>

<!-- LOGIN -->
<div id="login">
  <h3>Identifica√ß√£o do participante</h3>
  <input id="nome" placeholder="Nome completo">
  <select id="unidade">
    <option value="">Selecione a unidade</option>
    <option>SEDE</option>
    <option>HUC</option>
    <option>PAUC/CIS</option>
    <option>CQA/CCO</option>
    <option>AMPLIA</option>
    <option>CPS</option>
    <option>ADUC</option>
    <option>CCI</option>
  </select>
  <button onclick="start()">Iniciar Desafio</button>
</div>

<!-- JOGO -->
<div id="jogo" class="hidden">
  <h3 id="tituloRegra"></h3>
  <div id="perguntas"></div>
  <button onclick="concluirRegra()">Concluir Regra</button>
  <div id="mensagem" class="msg"></div>
</div>

<!-- RANKING -->
<div class="ranking">
  <h3>üèÜ Ranking Geral</h3>
  <div id="ranking"></div>
</div>

<!-- SELOS -->
<div class="ranking">
  <h3>üèÖ Selos Conquistados</h3>
  <div id="selos" style="display:flex;flex-wrap:wrap;gap:10px;"></div>
</div>

</div>

<script>
/* =========================
   CONFIGURA√á√ïES GERAIS
========================= */
const PONTUACAO_MAXIMA_REGRA = 60;
const PONTUACAO_MINIMA = 42; // 70%

/* =========================
   N√çVEIS DE PREVEN√á√ÉO
========================= */
const niveis = [
  { nivel: 1, nome: "Aten√ß√£o B√°sica", regras: [0,1] },
  { nivel: 2, nome: "Preven√ß√£o Essencial", regras: [2,3,4,5] },
  { nivel: 3, nome: "Seguran√ßa Estruturada", regras: [6,7,8,9] },
  { nivel: 4, nome: "Sa√∫de Segura", regras: [10,11] }
];

/* =========================
   CONCLUS√ÉO DA REGRA
========================= */
function concluirRegra(){
  if(!regraLiberada(regraAtual)) return;

  let pontosRegra = 0;

  document.querySelectorAll(".question").forEach((q,i)=>{
    const marcada = document.querySelector(`input[name="q${i}"]:checked`);
    const correta = regras[regraAtual].p[i][1];

    if(marcada && (marcada.value === "true") === correta){
      pontosRegra += 10;
      q.classList.add("correct");
    } else {
      q.classList.add("wrong");
    }
  });

  // ‚ùå N√£o atingiu 70%
  if(pontosRegra < PONTUACAO_MINIMA){
    document.getElementById("mensagem").innerText =
      `‚ùå Pontua√ß√£o insuficiente (${pontosRegra}/${PONTUACAO_MAXIMA_REGRA}).\n` +
      `√â necess√°rio no m√≠nimo 70% para concluir esta regra.`;
    return;
  }

  // ‚úÖ Aprovado
  pontos += pontosRegra;
  salvarRanking();
  salvarSelo(regraAtual);
  verificarCertificadoNivel();

  document.getElementById("mensagem").innerText =
    `‚úÖ Regra conclu√≠da!\nPontua√ß√£o da regra: ${pontosRegra} pts`;

  regraAtual++;
  setTimeout(carregarRegra, 1500);
}

/* =========================
   SELOS POR REGRA
========================= */
function salvarSelo(regraIndex){
  let selos = JSON.parse(localStorage.getItem("selos")) || [];
  if(!selos.includes(regraIndex)){
    selos.push(regraIndex);
    localStorage.setItem("selos", JSON.stringify(selos));
  }
  carregarSelos();
}

function carregarSelos(){
  const div = document.getElementById("selos");
  if(!div) return;

  let selos = JSON.parse(localStorage.getItem("selos")) || [];
  div.innerHTML = "";

  if(selos.length === 0){
    div.innerHTML = "<p>Nenhum selo conquistado ainda.</p>";
    return;
  }

  selos.forEach(i=>{
    div.innerHTML += `
      <div class="selo">
        üèÖ<br>
        ${regras[i].titulo}
      </div>
    `;
  });
}

/* =========================
   CERTIFICADO POR N√çVEL
========================= */
function verificarCertificadoNivel(){
  const selos = JSON.parse(localStorage.getItem("selos")) || [];
  let certificados = JSON.parse(localStorage.getItem("certificados")) || [];

  niveis.forEach(nivel=>{
    const concluiuNivel = nivel.regras.every(r => selos.includes(r));
    const jaGerado = certificados.includes(nivel.nivel);

    if(concluiuNivel && !jaGerado){
      certificados.push(nivel.nivel);
      localStorage.setItem("certificados", JSON.stringify(certificados));
      gerarCertificado(nivel);
    }
  });
}

/* =========================
   GERA√á√ÉO DO CERTIFICADO
========================= */
function gerarCertificado(nivel){
  alert(
    `üéì CERTIFICADO CONQUISTADO!\n\n` +
    `${jogador.nome}\n` +
    `concluiu o ${nivel.nivel}¬∫ N√≠vel da Preven√ß√£o\n` +
    `${nivel.nome}\n\n` +
    `Campanha: 12 Regras de Ouro para um Ano Mais Seguro`
  );
}
</script>
</body>
</html>
